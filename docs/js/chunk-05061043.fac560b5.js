(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05061043"],{"0221":function(t,a,e){},"53ae":function(t,a,e){t.exports=e.p+"img/2.1252e84d.png"},"58ec":function(t,a,e){t.exports=e.p+"img/demo1.ba188bff.png"},"911a":function(t,a,e){t.exports=e.p+"img/1.5a448bd2.png"},a128:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"archives"},[s("el-card",{attrs:{shadow:"hover"}},[t._v("我的档案")]),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[s("el-card",{staticClass:"user-card",attrs:{shadow:"hover"}},[s("div",{staticClass:"user"},[s("img",{attrs:{src:e("58ec")}}),s("p",[s("strong",[t._v(t._s(t.user.studentName))]),s("br"),s("span",[t._v(t._s(t.user.className))])])]),s("div",{staticClass:"growth"},[t._v("我的成长值："),s("em",[t._v(t._s(t.user.growths))])]),s("div",{staticClass:"rank"},[s("span",[s("em",[t._v(t._s(t.user.bjRank)+"名")]),s("br"),t._v("\n                        班级排名\n                    ")]),s("span",[s("em",[t._v(t._s(t.user.bjRank)+"名")]),s("br"),t._v("\n                        年级排名\n                    ")])])]),s("el-card",{staticClass:"data-card",attrs:{shadow:"hover"}},[s("header",{attrs:{slot:"header"},slot:"header"},[t._v("我的资料\n                    "),s("el-button",{staticClass:"editor",attrs:{type:"text"},on:{click:t.editor}},[t._v(t._s(t.dataBtnName))])],1),s("el-form",{attrs:{"label-width":"70px",size:"mini",disabled:""}},[s("el-form-item",{attrs:{label:"班主任"}},[s("el-input",{model:{value:t.dataForm.teachername+"老师",callback:function(a){t.$set(t.dataForm,"teachername+'老师'",a)},expression:"dataForm.teachername+'老师'"}})],1)],1),s("el-form",{attrs:{model:t.dataForm,"label-width":"70px",size:"mini",disabled:t.dataFormDisabled}},[s("el-form-item",{attrs:{label:"我的理想"}},[s("el-input",{model:{value:t.dataForm.wdlx,callback:function(a){t.$set(t.dataForm,"wdlx",a)},expression:"dataForm.wdlx"}})],1),s("el-form-item",{attrs:{label:"兴趣爱好"}},[s("el-input",{model:{value:t.dataForm.xqah,callback:function(a){t.$set(t.dataForm,"xqah",a)},expression:"dataForm.xqah"}})],1),s("el-form-item",{attrs:{label:"我的特长"}},[s("el-input",{model:{value:t.dataForm.wdtc,callback:function(a){t.$set(t.dataForm,"wdtc",a)},expression:"dataForm.wdtc"}})],1)],1)],1),s("el-card",{staticClass:"medal-card",attrs:{shadow:"hover"}},[s("header",{attrs:{slot:"header"},slot:"header"},[t._v("我的奖章")]),s("ul",t._l(t.medalList,function(a){return s("li",[s("img",{attrs:{src:t.$proxy+t.imgUrl+a.jzsl}}),s("span",[t._v(t._s(a.name))])])}))])],1),s("el-card",{staticClass:"center",attrs:{shadow:"hover"}},[s("header",{attrs:{slot:"header"},slot:"header"},[t._v("\n                "+t._s(t.year)+"学年\n                "),s("div",{staticClass:"btn"},[s("el-button",{attrs:{size:"mini"},on:{click:t.add}},[t._v("新增")]),s("el-button",{attrs:{size:"mini"}},[t._v("导出")]),s("el-button",{attrs:{size:"mini"},on:{click:function(a){t.detailShow=!t.detailShow}}},[t._v(t._s(t.detailShow?"成长详情":"成长之树"))])],1)]),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.detailShow,expression:"detailShow"}]},t._l(t.detailList,function(a){return s("li",["1"===a.jlfs?s("i",{staticClass:"fa fa-thumbs-up green"}):s("i",{staticClass:"fa fa-book orange"}),s("div",{staticClass:"main"},[s("p",[t._v(t._s(a.title)+"，成长值+"+t._s(a.growth)+"；")]),s("time",[t._v(t._s(a.givetime))]),s("div",{staticClass:"img"},t._l(a.imglist,function(a){return s("img",{attrs:{src:t.$proxy+t.imgUrl+a.url}})}))])])})),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.detailShow,expression:"!detailShow"}],staticClass:"tree"},[t.user.growths<100?s("img",{attrs:{src:e("911a")}}):t._e(),t.user.growths>=100&&t.user.growths<200?s("img",{attrs:{src:e("53ae")}}):t._e(),t.user.growths>=200&&t.user.growths<400?s("img",{attrs:{src:e("c947")}}):t._e(),t.user.growths>=400&&t.user.growths<700?s("img",{attrs:{src:e("fab8")}}):t._e(),t.user.growths>1e3?s("img",{attrs:{src:e("beda")}}):t._e(),s("em",[t._v(t._s(t.user.growths))]),s("div",{attrs:{id:"radar"}})])]),s("div",{staticClass:"right"},[s("el-card",{staticClass:"evaluate-list",attrs:{shadow:"hover"}},[s("header",{attrs:{slot:"header"},slot:"header"},[t._v("我的评价")]),s("ul",t._l(t.evaluateList,function(a){return s("li",[s("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:t.jump}},[t._v(t._s(t.year)+"第"+t._s(a.weekly)+"周评价")])],1)}))]),s("el-card",{staticClass:"rank-list",attrs:{shadow:"hover"}},[s("header",{attrs:{slot:"header"},slot:"header"},[s("span",{class:{notActive:!t.classRankShow},on:{click:function(a){t.classRankShow=!t.classRankShow}}},[t._v("班级排名")]),s("span",{class:{notActive:t.classRankShow},on:{click:function(a){t.classRankShow=!t.classRankShow}}},[t._v("年级排名")])]),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.classRankShow,expression:"classRankShow"}]},t._l(t.classRankList,function(a,e){return s("li",[s("div",{staticClass:"main"},[s("em",{style:{background:a.color}},[t._v(t._s(e+1))]),s("span",[t._v(t._s(a.user_name)),s("br"),t._v(t._s(a.classname))])]),s("div",{staticClass:"value",style:{color:a.color}},[t._v("+"+t._s(a.growths))])])})),s("ul",{directives:[{name:"show",rawName:"v-show",value:!t.classRankShow,expression:"!classRankShow"}]},t._l(t.gradeRankList,function(a,e){return s("li",[s("div",{staticClass:"main"},[s("em",{style:{background:a.color}},[t._v(t._s(e+1))]),s("span",[t._v(t._s(a.user_name)),s("br"),t._v(t._s(a.classname))])]),s("div",{staticClass:"value",style:{color:a.color}},[t._v("+"+t._s(a.growths))])])}))])],1)],1),s("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(a){t.dialogVisible=a}}},[s("header",{attrs:{slot:"title"},slot:"title"},[t._v("新增")]),s("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"标题",prop:"title"}},[s("el-input",{model:{value:t.ruleForm.title,callback:function(a){t.$set(t.ruleForm,"title",a)},expression:"ruleForm.title"}})],1),s("el-form-item",{attrs:{label:"获奖时间"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.ruleForm.archive_date,callback:function(a){t.$set(t.ruleForm,"archive_date",a)},expression:"ruleForm.archive_date"}})],1),s("el-form-item",{attrs:{label:"学校维度",prop:"school"}},[s("el-select",{attrs:{placeholder:"请选择学校维度"},on:{change:t.schoolChange},model:{value:t.ruleForm.dimensionality_school_id,callback:function(a){t.$set(t.ruleForm,"dimensionality_school_id",a)},expression:"ruleForm.dimensionality_school_id"}},t._l(t.schoolList,function(t){return s("el-option",{attrs:{label:t.name,value:t.id}})}))],1),s("el-form-item",{attrs:{label:"等级"}},[s("el-select",{attrs:{placeholder:"请选择等级"},on:{change:t.gradeChange},model:{value:t.ruleForm.grade_id,callback:function(a){t.$set(t.ruleForm,"grade_id",a)},expression:"ruleForm.grade_id"}},t._l(t.gradeList,function(t){return s("el-option",{attrs:{label:t.name,value:t.id}})}))],1),s("el-form-item",{attrs:{label:"成长值"}},[s("el-input",{attrs:{disabled:""},model:{value:t.ruleForm.growth,callback:function(a){t.$set(t.ruleForm,"growth",a)},expression:"ruleForm.growth"}})],1),s("el-form-item",{attrs:{label:"详细描述",prop:"desc"}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.ruleForm.description,callback:function(a){t.$set(t.ruleForm,"description",a)},expression:"ruleForm.description"}})],1),s("el-form-item",{attrs:{label:"附件"}},[s("el-upload",{attrs:{action:t.$proxy+"/upload/uploadFile","on-remove":t.handleRemove,"on-success":t.handleSuccess,"file-list":t.ruleForm.imglist}},[s("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-upload"}},[t._v("选择上传")])],1)],1)],1),s("footer",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(a){t.dialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(a){t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1)},i=[],r=(e("7f7f"),{name:"Archives",data:function(){return{dataBtnName:"编辑",dataForm:{teachername:"",wdlx:"",xqah:"",wdtc:""},dataFormDisabled:!0,medalList:"",imgUrl:"/resource/showImg?path=",year:"",dialogVisible:!1,schoolList:[],gradeList:[],ruleForm:{student_id:"",title:"",archive_date:"",dimensionality_school_id:"",grade_id:"",growth:"",description:"",archiveFile:""},archiveFileList:[],fileList:[],rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}]},detailShow:!1,detailList:[],evaluateList:[],classRankList:[],classRankShow:!0,gradeRankList:[],radar:[]}},computed:{user:function(){return this.$store.state.user}},created:function(){var t=this;this.$ajax.post("/api/student/getInfo").then(function(a){t.dataForm=a.data.data}),this.$ajax.post("/api/student/getXn").then(function(a){t.year=a.data.data.xn}),this.getDetailList(),this.$ajax.post("/api/student/getstudentArchivesList").then(function(a){t.radar=a.data.data}).then(function(){t.drawRadar()}),this.$ajax.post("/api/student/getstudentMedal").then(function(a){t.medalList=a.data.data}),this.$ajax.post("/api/student/getEvaluateList").then(function(a){t.evaluateList=a.data.data}),this.$ajax.post("/api/myClass/getBjRank").then(function(a){t.classRankList=a.data.data}),this.$ajax.post("/api/myClass/getNjRank ").then(function(a){t.gradeRankList=a.data.data})},methods:{jump:function(){this.$router.push("/backstage/4-1")},editor:function(){var t=this;"编辑"===this.dataBtnName?(this.dataBtnName="保存",this.dataFormDisabled=!1):"保存"===this.dataBtnName&&this.$ajax.post("/api/student/updateStudent",this.dataForm).then(function(a){t.dataBtnName="编辑",t.dataFormDisabled=!0,t.$message.success(a.data.errmsg)})},drawRadar:function(){var t=this.$echarts.init(document.getElementById("radar"));t.setOption({radar:{name:{textStyle:{color:"#333",fontSize:"12px"}},nameGap:2,axisLine:{lineStyle:{color:"rgba(131,141,158,.1)"}},indicator:[{name:this.radar[0].name,max:10},{name:this.radar[1].name,max:10},{name:this.radar[2].name,max:10},{name:this.radar[3].name,max:10},{name:this.radar[4].name,max:10}],radius:50},series:[{type:"radar",data:[{value:[this.radar[0].growths,this.radar[1].growths,this.radar[2].growths,this.radar[3].growths,this.radar[4].growths],name:"",itemStyle:{normal:{color:"rgba(95,184,120,.3)"}}}]}]})},getDetailList:function(){var t=this;this.$ajax.post("/api/student/getstudentArchives").then(function(a){t.detailList=a.data.data})},getSchoolList:function(){var t=this;this.$ajax.post("/api/archives/getSchoolDimensionalityList").then(function(a){t.schoolList=a.data.data})},schoolChange:function(){var t=this;this.gradeList=[],this.ruleForm.grade_id="",this.$ajax.post("/api/archives/getGrowth ",{dimensionality_school_id:this.ruleForm.dimensionality_school_id}).then(function(a){t.ruleForm.growth=a.data.data.growth}),this.$ajax.post("/api/archives/getGradeList",{dimensionality_school_id:this.ruleForm.dimensionality_school_id}).then(function(a){t.gradeList=a.data.data})},gradeChange:function(){var t=this;this.$ajax.post("/api/archives/getGrowth ",{grade_id:this.ruleForm.grade_id}).then(function(a){t.ruleForm.growth=a.data.data.growth})},clearForm:function(){this.ruleForm.student_id="",this.ruleForm.title="",this.ruleForm.archive_date="",this.ruleForm.dimensionality_school_id="",this.ruleForm.grade_id="",this.ruleForm.growth="",this.ruleForm.description=""},add:function(){this.clearForm(),this.dialogVisible=!0,this.getSchoolList()},handleRemove:function(t,a){var e=t.url?t.url:t.response.path;this.$ajax.post("/resource/deleteFile",{path:e}).then(function(t){console.log(t.data.errmsg)}),this.fileList=a},handleSuccess:function(t,a,e){console.log(t.errmsg),this.fileList=e},submitForm:function(t){var a=this,e="/api/archives/add";this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;for(var s=0;s<a.fileList.length;s++)a.fileList[s].response?a.archiveFileList.push({url:a.fileList[s].response.path,name:a.fileList[s].name}):a.archiveFileList.push({url:a.fileList[s].url,name:a.fileList[s].name});a.ruleForm.archiveFile=JSON.stringify(a.archiveFileList),a.$ajax.post(e,a.ruleForm).then(function(t){a.getDetailList(),a.dialogVisible=!1,a.$message.success(t.data.errmsg)})})}}}),o=r,l=(e("e2d5"),e("2877")),n=Object(l["a"])(o,s,i,!1,null,null,null);n.options.__file="Archives.vue";a["default"]=n.exports},beda:function(t,a,e){t.exports=e.p+"img/5.9053effa.png"},c947:function(t,a,e){t.exports=e.p+"img/3.ff9b3309.png"},e2d5:function(t,a,e){"use strict";var s=e("0221"),i=e.n(s);i.a},fab8:function(t,a,e){t.exports=e.p+"img/4.1a526fa0.png"}}]);
//# sourceMappingURL=chunk-05061043.fac560b5.js.map