(function(e){function t(t){for(var a,r,c=t[0],s=t[1],i=t[2],l=0,d=[];l<c.length;l++)r=c[l],o[r]&&d.push(o[r][0]),o[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);f&&f(t);while(d.length)d.shift()();return u.push.apply(u,i||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(u.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},o={app:0},u=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-05061043":"b8c36a0d","chunk-1023fafc":"3cd2eed4","chunk-1f6be39a":"25a51a2c","chunk-2d841c91":"2d93a1a7","chunk-482ec982":"eb397287","chunk-61813a7f":"6c0c4319","chunk-65ed65a0":"26539773","chunk-664bd9a1":"ddedc566","chunk-6a1ea8d8":"dc483988","chunk-9413dee0":"02755928","chunk-e72a10a0":"44220e82","chunk-f1b6af2e":"0fd0ccb2"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-05061043":1,"chunk-1023fafc":1,"chunk-1f6be39a":1,"chunk-2d841c91":1,"chunk-482ec982":1,"chunk-61813a7f":1,"chunk-65ed65a0":1,"chunk-664bd9a1":1,"chunk-6a1ea8d8":1,"chunk-9413dee0":1,"chunk-e72a10a0":1,"chunk-f1b6af2e":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-05061043":"77e697e6","chunk-1023fafc":"c4168a37","chunk-1f6be39a":"361a47f0","chunk-2d841c91":"7e65f08e","chunk-482ec982":"43b1eea2","chunk-61813a7f":"0410725a","chunk-65ed65a0":"cd3646d0","chunk-664bd9a1":"7e65f08e","chunk-6a1ea8d8":"7e65f08e","chunk-9413dee0":"7e65f08e","chunk-e72a10a0":"7e65f08e","chunk-f1b6af2e":"2a9e76f6"}[e]+".css",r=s.p+a,o=document.getElementsByTagName("link"),u=0;u<o.length;u++){var c=o[u],i=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(i===a||i===r))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){c=l[u],i=c.getAttribute("data-href");if(i===a||i===r)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||r,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.request=a,n(o)},d.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(d)}).then(function(){r[e]=0}));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var u=new Promise(function(t,n){a=o[e]=[t,n]});t.push(a[2]=u);var i,l=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=c(e),i=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,u=new Error("Loading chunk "+e+" failed.\n("+a+": "+r+")");u.type=a,u.request=r,n[1](u)}o[e]=void 0}};var f=setTimeout(function(){i({type:"timeout",target:d})},12e4);d.onerror=d.onload=i,l.appendChild(d)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var f=l;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("c21b"),r=n.n(a);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("4917"),n("3b2b");var a=n("c93e"),r=(n("6762"),n("2fdb"),n("a481"),n("ac6a"),n("cadf"),n("551c"),n("097d"),n("2b0e")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Navigation"),n("router-view")],1)},u=[],c=n("f4dd"),s={name:"app",components:{Navigation:c["default"]},computed:{user:function(){return this.$store.state.user},token:function(){return this.$store.state.token}},created:function(){},methods:{getUserInfo:function(){var e=this;this.$ajax.post("/api/desktop/getInfo").then(function(t){e.$store.commit("setData",{name:"user",data:t.data.data})})},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return!!(t=document.cookie.match(n))&&decodeURIComponent(t[2])}}},i=s,l=(n("034f"),n("2877")),d=Object(l["a"])(i,o,u,!1,null,null,null);d.options.__file="App.vue";var f=d.exports,h=n("8c4f");r["default"].use(h["a"]);var m,p=[{path:"/class",name:"我的班级",component:function(){return n.e("chunk-61813a7f").then(n.bind(null,"be7e"))}},{path:"/loading",name:"加载",component:function(){return n.e("chunk-65ed65a0").then(n.bind(null,"45d6"))}}],v=new h["a"]({routes:p}),g=[{path:"/circle",name:"成长圈",component:function(){return n.e("chunk-f1b6af2e").then(n.bind(null,"4ff6"))},meta:{roles:["SYS_STUDENT"],student:!0}},{path:"/archives",name:"我的档案",component:function(){return n.e("chunk-05061043").then(n.bind(null,"a128"))},meta:{roles:["SYS_STUDENT"],student:!0}},{path:"/backstage/1",name:"国家维度",component:function(){return n.e("chunk-9413dee0").then(n.bind(null,"b83c"))},meta:{roles:["SYS_ADMIN"],admin:!0}},{path:"/backstage/2",name:"学校维度",component:function(){return n.e("chunk-1f6be39a").then(n.bind(null,"3990"))},meta:{roles:["SYS_ADMIN"],admin:!0}},{path:"/backstage/3",name:"档案管理",component:function(){return n.e("chunk-2d841c91").then(n.bind(null,"3e60"))},meta:{roles:["SYS_BZR","SYS_TEACHER_MATH","SYS_TEACHER_CHINESE"],teacher:!0}},{path:"/backstage/4-1",name:"过程评价",component:function(){return n.e("chunk-1023fafc").then(n.bind(null,"1a7d"))},meta:{roles:["SYS_BZR","SYS_TEACHER_MATH","SYS_TEACHER_CHINESE"],teacher:!0}},{path:"/backstage/4-2",name:"评价设置",component:function(){return n.e("chunk-6a1ea8d8").then(n.bind(null,"6cb3"))},meta:{roles:["SYS_ADMIN"],admin:!0}},{path:"/backstage/5-1",name:"奖章授予",component:function(){return n.e("chunk-482ec982").then(n.bind(null,"c978"))},meta:{roles:["SYS_BZR","SYS_TEACHER_MATH","SYS_TEACHER_CHINESE","SYS_ADMIN"],teacher:!0,admin:!0}},{path:"/backstage/5-2",name:"奖章设置",component:function(){return n.e("chunk-e72a10a0").then(n.bind(null,"f9d9"))},meta:{roles:["SYS_ADMIN"],admin:!0}},{path:"/backstage/6",name:"成长奖励",component:function(){return n.e("chunk-664bd9a1").then(n.bind(null,"2aa2"))},meta:{roles:["SYS_BZR","SYS_TEACHER_MATH","SYS_TEACHER_CHINESE","SYS_ADMIN"],teacher:!0,admin:!0}},{path:"*",name:"404",redirect:"/class"}],k=(n("7f7f"),n("2f62")),_=n("bc3a"),b=n.n(_),S=n("b383"),E=n.n(S),y=b.a.create({baseURL:Object({NODE_ENV:"production",VUE_APP_PROXY:"/",BASE_URL:""}).VUE_APP_ServerApi,timeout:1e4,headers:{"Content-Type":"application/x-www-form-urlencoded"}});y.interceptors.request.use(function(e){return"/page_portal/save_layout"!==e.url&&"/calendar_portal/get_events_date"!==e.url&&(m=r["default"].prototype.$loading({text:"",background:"rgba(0, 0, 0, 0.3)"})),"post"===e.method&&(e.data=E.a.stringify(e.data)),""!==x.getters.token&&(e.headers.Authorization="Bearer "+x.getters.token),e},function(e){return m=r["default"].prototype.$loading({text:"",background:"rgba(0, 0, 0, 0.3)"}),r["default"].prototype.$notify.info("加载超时"),Promise.reject(e)}),y.interceptors.response.use(function(e){return m.close(),e},function(e){if(m.close(),e.response)switch(e.response.status){case 403:v.replace({path:"/loading"})}return Promise.reject(e)});var w=y;r["default"].use(k["a"]);var x=new k["a"].Store({state:{cookie:"",token:"",role:[],roleList:[],navname:"",user:{}},getters:{cookie:function(e){return e.cookie},token:function(e){return e.token},role:function(e){return e.role}},mutations:{setData:function(e,t){e[t.name]=t.data},setToken:function(e,t){e.token=t,sessionStorage["token"]=t},setRole:function(e,t){e.role=t,sessionStorage["role"]=JSON.stringify(t)}},actions:{getToken:function(e){return new Promise(function(t,n){w.post("/gettoken",{uuid:e.getters.cookie}).then(function(n){e.commit("setToken",n.data.token),t(n.data.token)}).catch(function(e){n(e)})})},getInfo:function(e){return new Promise(function(t,n){w.post("/api/user/getInfo").then(function(n){e.commit("setData",{name:"roleList",data:n.data.data.rolelist}),e.commit("setData",{name:"navname",data:n.data.data.name});for(var a=[],r=0;r<n.data.data.rolelist.length;r++)a.push(n.data.data.rolelist[r].code);e.commit("setRole",a),t()}).catch(function(e){n(e)})})}}}),j=n("313e"),T=n.n(j),A=n("5c96"),C=n.n(A);n("c69f");r["default"].use(C.a);n("7f10");var N=n("96a8");function $(e,t){return!t.meta||!t.meta.roles||e.some(function(e){return t.meta.roles.includes(e)})}function I(e,t){var n=[];return e.forEach(function(e){var r=Object(a["a"])({},e);$(t,r)&&(r.children&&(r.children=I(r.children,t)),n.push(r))}),n}function R(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return!!(t=document.cookie.match(n))&&(x.commit("setData",{name:"cookie",data:decodeURIComponent(t[2])}),decodeURIComponent(t[2]))}function O(){return!!x.getters.token||null!==sessionStorage.getItem("token")&&(x.commit("setToken",sessionStorage["token"]),!0)}N.keys().forEach(function(e){var t=N(e),n=e.replace(/^\.\/(.*)\.\w+$/,"$1");r["default"].component(n,t.default||t)}),r["default"].prototype.$ajax=w,r["default"].prototype.$echarts=T.a,r["default"].prototype.$proxy="/",r["default"].config.productionTip=!1,v.beforeEach(function(e,t,n){O()?0===x.getters.role.length?x.dispatch("getInfo").then(function(){v.addRoutes(I(g,x.getters.role)),n(Object(a["a"])({},e,{replace:!0}))}):n():R("LOGIN_UUID")?x.dispatch("getToken").then(function(){x.dispatch("getInfo").then(function(){v.addRoutes(I(g,x.getters.role)),n(Object(a["a"])({},e,{replace:!0}))})}):w.post("getLoginUrl").then(function(e){sessionStorage.clear(),window.location.href=e.data.url})}),new r["default"]({router:v,store:x,render:function(e){return e(f)}}).$mount("#app")},7067:function(e,t,n){"use strict";var a=n("d3c7"),r=n.n(a);r.a},"96a8":function(e,t,n){var a={"./HelloWorld.vue":"fdab","./Navigation.vue":"f4dd"};function r(e){var t=o(e);return n(t)}function o(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="96a8"},a4e1:function(e,t,n){"use strict";var a=n("a8f7"),r=n.n(a);r.a},a8f7:function(e,t,n){},c21b:function(e,t,n){},c69f:function(e,t,n){},d3c7:function(e,t,n){},f4dd:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"nav"}},[n("div",{staticClass:"content"},[n("router-link",{staticClass:"title",attrs:{to:"/class"}},[n("i",{staticClass:"fa fa-address-book-o"}),e._v("学生成长档案")]),n("el-menu",{staticClass:"menu",attrs:{"default-active":e.$route.path,mode:"horizontal","background-color":"#009688","text-color":"#fff","active-text-color":"#ffd04b"}},[this.student?n("el-menu-item",{attrs:{index:"/circle"}},[n("router-link",{attrs:{to:"/circle"}},[e._v("成长圈")])],1):e._e(),n("el-menu-item",{attrs:{index:"/class"}},[n("router-link",{attrs:{to:"/class"}},[e._v("我的班级")])],1),this.student?n("el-menu-item",{attrs:{index:"/archives"}},[n("router-link",{attrs:{to:"/archives"}},[e._v("我的档案")])],1):e._e(),this.admin?n("el-menu-item",{attrs:{index:"/backstage/1"}},[n("router-link",{attrs:{to:"/backstage/1"}},[e._v("国家维度")])],1):e._e(),this.admin?n("el-menu-item",{attrs:{index:"/backstage/2"}},[n("router-link",{attrs:{to:"/backstage/2"}},[e._v("学校维度")])],1):e._e(),this.teacher?n("el-menu-item",{attrs:{index:"/backstage/3"}},[n("router-link",{attrs:{to:"/backstage/3"}},[e._v("档案管理")])],1):e._e(),this.student?e._e():n("el-submenu",{attrs:{index:"/backstage/4-1"}},[n("template",{slot:"title"},[e._v("评价")]),this.teacher?n("el-menu-item",{attrs:{index:"/backstage/4-1"}},[n("router-link",{attrs:{to:"/backstage/4-1"}},[e._v("过程评价")])],1):e._e(),this.admin?n("el-menu-item",{attrs:{index:"/backstage/4-2"}},[n("router-link",{attrs:{to:"/backstage/4-2"}},[e._v("评价设置")])],1):e._e()],2),this.student?e._e():n("el-submenu",{attrs:{index:"/backstage/5-1"}},[n("template",{slot:"title"},[e._v("成长奖章")]),this.teacher||this.admin?n("el-menu-item",{attrs:{index:"/backstage/5-1"}},[n("router-link",{attrs:{to:"/backstage/5-1"}},[e._v("奖章授予")])],1):e._e(),this.admin?n("el-menu-item",{attrs:{index:"/backstage/5-2"}},[n("router-link",{attrs:{to:"/backstage/5-2"}},[e._v("奖章设置")])],1):e._e()],2),this.teacher||this.admin?n("el-menu-item",{attrs:{index:"6"}},[n("router-link",{attrs:{to:"/backstage/6"}},[e._v("成长奖励")])],1):e._e(),n("el-submenu",{attrs:{index:"7"}},[n("template",{slot:"title"},[e._v(e._s(e.navname))]),n("el-menu-item",{attrs:{index:"7-1"},on:{click:e.logout}},[e._v("注销")])],2)],1)],1)])},r=[],o=(n("6762"),n("2fdb"),n("cadf"),n("551c"),n("097d"),{name:"Navigation",computed:{role:function(){return this.$store.state.role},navname:function(){return this.$store.state.navname},student:function(){return this.role.includes("SYS_STUDENT")},teacher:function(){return this.role.includes("SYS_BZR")},admin:function(){return this.role.includes("SYS_ADMIN")}},methods:{logout:function(){var e,t,n=this;this.$ajax.post("/logoutApi").then(function(a){e=a.data.casLoginUrl,t=a.data.casLogoutUrl,n.$ajax.get(t).then(function(t){console.log(t.data),sessionStorage.clear(),window.location.href=e})})}}}),u=o,c=(n("a4e1"),n("2877")),s=Object(c["a"])(u,a,r,!1,null,null,null);s.options.__file="Navigation.vue";t["default"]=s.exports},fdab:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h1",[e._v(e._s(e.msg))]),e._m(0),n("h3",[e._v("Installed CLI Plugins")]),e._m(1),n("h3",[e._v("Essential Links")]),e._m(2),n("h3",[e._v("Ecosystem")]),e._m(3)])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n    For guide and recipes on how to configure / customize this project,"),n("br"),e._v("\n    check out the\n    "),n("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(".\n  ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[e._v("eslint")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),n("li",[n("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),n("li",[n("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),n("li",[n("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],o=(n("cadf"),n("551c"),n("097d"),{name:"HelloWorld",props:{msg:String}}),u=o,c=(n("7067"),n("2877")),s=Object(c["a"])(u,a,r,!1,null,"d996b772",null);s.options.__file="HelloWorld.vue";t["default"]=s.exports}});
//# sourceMappingURL=app.e8be3262.js.map