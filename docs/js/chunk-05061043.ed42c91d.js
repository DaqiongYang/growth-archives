(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05061043"],{"0221":function(t,e,a){},"53ae":function(t,e,a){t.exports=a.p+"img/2.1252e84d.png"},"58ec":function(t,e,a){t.exports=a.p+"img/demo1.ba188bff.png"},"911a":function(t,e,a){t.exports=a.p+"img/1.5a448bd2.png"},a128:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"archives"},[s("el-card",{attrs:{shadow:"hover"}},[t._v("我的档案")]),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[s("el-card",{staticClass:"user-card",attrs:{shadow:"hover"}},[s("div",{staticClass:"user"},[s("img",{attrs:{src:a("58ec")}}),s("p",[s("strong",[t._v(t._s(t.user.studentName))]),s("br"),s("span",[t._v(t._s(t.user.className))])])]),s("div",{staticClass:"growth"},[t._v("我的成长值："),s("em",[t._v(t._s(t.user.growths))])]),s("div",{staticClass:"rank"},[s("span",[s("em",[t._v(t._s(t.user.bjRank)+"名")]),s("br"),t._v("\n                        班级排名\n                    ")]),s("span",[s("em",[t._v(t._s(t.user.bjRank)+"名")]),s("br"),t._v("\n                        年级排名\n                    ")])])]),s("el-card",{staticClass:"data-card",attrs:{shadow:"hover"}},[s("header",{attrs:{slot:"header"},slot:"header"},[t._v("我的资料\n                    "),s("el-button",{staticClass:"editor",attrs:{type:"text"},on:{click:t.editor}},[t._v(t._s(t.dataBtnName))])],1),s("el-form",{attrs:{"label-width":"70px",size:"mini",disabled:""}},[s("el-form-item",{attrs:{label:"班主任"}},[s("el-input",{model:{value:t.dataForm.teachername+"老师",callback:function(e){t.$set(t.dataForm,"teachername+'老师'",e)},expression:"dataForm.teachername+'老师'"}})],1)],1),s("el-form",{attrs:{model:t.dataForm,"label-width":"70px",size:"mini",disabled:t.dataFormDisabled}},[s("el-form-item",{attrs:{label:"我的理想"}},[s("el-input",{model:{value:t.dataForm.wdlx,callback:function(e){t.$set(t.dataForm,"wdlx",e)},expression:"dataForm.wdlx"}})],1),s("el-form-item",{attrs:{label:"兴趣爱好"}},[s("el-input",{model:{value:t.dataForm.xqah,callback:function(e){t.$set(t.dataForm,"xqah",e)},expression:"dataForm.xqah"}})],1),s("el-form-item",{attrs:{label:"我的特长"}},[s("el-input",{model:{value:t.dataForm.wdtc,callback:function(e){t.$set(t.dataForm,"wdtc",e)},expression:"dataForm.wdtc"}})],1)],1)],1),s("el-card",{staticClass:"medal-card",attrs:{shadow:"hover"}},[s("header",{attrs:{slot:"header"},slot:"header"},[t._v("我的奖章")]),s("ul",t._l(t.medalList,function(e){return s("li",[s("img",{attrs:{src:t.$proxy+t.imgUrl+e.jzsl}}),s("span",[t._v(t._s(e.name))])])}))])],1),s("el-card",{staticClass:"center",attrs:{shadow:"hover"}},[s("header",{attrs:{slot:"header"},slot:"header"},[t._v("\n                "+t._s(t.year)+"学年\n                "),s("div",{staticClass:"btn"},[s("el-button",{attrs:{size:"mini"},on:{click:t.add}},[t._v("新增")]),s("el-button",{attrs:{size:"mini"}},[t._v("导出")]),s("el-button",{attrs:{size:"mini"},on:{click:function(e){t.detailShow=!t.detailShow}}},[t._v(t._s(t.detailShow?"成长之树":"成长详情"))])],1)]),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.detailShow,expression:"detailShow"}]},t._l(t.detailList,function(e){return s("li",["1"===e.jlfs?s("i",{staticClass:"fa fa-thumbs-up green"}):s("i",{staticClass:"fa fa-book orange"}),s("div",{staticClass:"main"},[s("p",[t._v(t._s(e.title)+"，成长值+"+t._s(e.growth)+"；")]),s("time",[t._v(t._s(e.givetime))]),s("div",{staticClass:"img"},t._l(e.imglist,function(e){return s("img",{attrs:{src:t.$proxy+t.imgUrl+e.url}})}))])])})),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.detailShow,expression:"!detailShow"}],staticClass:"tree"},[t.user.growths<100?s("img",{attrs:{src:a("911a")}}):t._e(),t.user.growths>=100&&t.user.growths<200?s("img",{attrs:{src:a("53ae")}}):t._e(),t.user.growths>=200&&t.user.growths<400?s("img",{attrs:{src:a("c947")}}):t._e(),t.user.growths>=400&&t.user.growths<700?s("img",{attrs:{src:a("fab8")}}):t._e(),t.user.growths>1e3?s("img",{attrs:{src:a("beda")}}):t._e(),s("em",[t._v(t._s(t.user.growths))]),s("div",{attrs:{id:"radar"}})])]),s("div",{staticClass:"right"},[s("el-card",{staticClass:"evaluate-list",attrs:{shadow:"hover"}},[s("header",{attrs:{slot:"header"},slot:"header"},[t._v("我的评价")]),s("ul",t._l(t.evaluateList,function(e){return s("li",[s("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){t.eva(e.id)}}},[t._v(t._s(t.year)+"第"+t._s(e.weekly)+"周评价")])],1)}))]),s("el-card",{staticClass:"rank-list",attrs:{shadow:"hover"}},[s("header",{attrs:{slot:"header"},slot:"header"},[s("span",{class:{notActive:!t.classRankShow},on:{click:function(e){t.classRankShow=!t.classRankShow}}},[t._v("班级排名")]),s("span",{class:{notActive:t.classRankShow},on:{click:function(e){t.classRankShow=!t.classRankShow}}},[t._v("年级排名")])]),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.classRankShow,expression:"classRankShow"}]},t._l(t.classRankList,function(e,a){return s("li",[s("div",{staticClass:"main"},[s("em",{style:{background:e.color}},[t._v(t._s(a+1))]),s("span",[t._v(t._s(e.user_name)),s("br"),t._v(t._s(e.classname))])]),s("div",{staticClass:"value",style:{color:e.color}},[t._v("+"+t._s(e.growths))])])})),s("ul",{directives:[{name:"show",rawName:"v-show",value:!t.classRankShow,expression:"!classRankShow"}]},t._l(t.gradeRankList,function(e,a){return s("li",[s("div",{staticClass:"main"},[s("em",{style:{background:e.color}},[t._v(t._s(a+1))]),s("span",[t._v(t._s(e.user_name)),s("br"),t._v(t._s(e.classname))])]),s("div",{staticClass:"value",style:{color:e.color}},[t._v("+"+t._s(e.growths))])])}))])],1)],1),s("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("header",{attrs:{slot:"title"},slot:"title"},[t._v("新增")]),s("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"标题",prop:"title"}},[s("el-input",{model:{value:t.ruleForm.title,callback:function(e){t.$set(t.ruleForm,"title",e)},expression:"ruleForm.title"}})],1),s("el-form-item",{attrs:{label:"获奖时间"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.ruleForm.archive_date,callback:function(e){t.$set(t.ruleForm,"archive_date",e)},expression:"ruleForm.archive_date"}})],1),s("el-form-item",{attrs:{label:"学校维度",prop:"school"}},[s("el-select",{attrs:{placeholder:"请选择学校维度"},on:{change:t.schoolChange},model:{value:t.ruleForm.dimensionality_school_id,callback:function(e){t.$set(t.ruleForm,"dimensionality_school_id",e)},expression:"ruleForm.dimensionality_school_id"}},t._l(t.schoolList,function(t){return s("el-option",{attrs:{label:t.name,value:t.id}})}))],1),s("el-form-item",{attrs:{label:"等级"}},[s("el-select",{attrs:{placeholder:"请选择等级"},on:{change:t.gradeChange},model:{value:t.ruleForm.grade_id,callback:function(e){t.$set(t.ruleForm,"grade_id",e)},expression:"ruleForm.grade_id"}},t._l(t.gradeList,function(t){return s("el-option",{attrs:{label:t.name,value:t.id}})}))],1),s("el-form-item",{attrs:{label:"成长值"}},[s("el-input",{attrs:{disabled:""},model:{value:t.ruleForm.growth,callback:function(e){t.$set(t.ruleForm,"growth",e)},expression:"ruleForm.growth"}})],1),s("el-form-item",{attrs:{label:"详细描述",prop:"desc"}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.ruleForm.description,callback:function(e){t.$set(t.ruleForm,"description",e)},expression:"ruleForm.description"}})],1),s("el-form-item",{attrs:{label:"附件"}},[s("el-upload",{attrs:{action:t.$proxy+"/upload/uploadFile","on-remove":t.handleRemove,"on-success":t.handleSuccess,"file-list":t.ruleForm.imglist}},[s("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-upload"}},[t._v("选择上传")])],1)],1)],1),s("footer",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1),s("el-dialog",{staticClass:"table-edit",attrs:{visible:t.dialogVisibleEva},on:{"update:visible":function(e){t.dialogVisibleEva=e}}},[s("header",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.dialogName))]),s("el-table",{staticClass:"table",attrs:{data:t.evaluationList,border:"",stripe:""}},[s("el-table-column",{attrs:{align:"center",prop:"studentname",label:"学生姓名","min-width":"100"}}),s("el-table-column",{attrs:{align:"center",prop:"temp1",label:"认真完成老师布置的作业","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-checkbox",{model:{value:e.row.temp1,callback:function(a){t.$set(e.row,"temp1",a)},expression:"scope.row.temp1"}})]}}])}),s("el-table-column",{attrs:{align:"center",prop:"temp2",label:"学习态度认真"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-checkbox",{model:{value:e.row.temp2,callback:function(a){t.$set(e.row,"temp2",a)},expression:"scope.row.temp2"}})]}}])}),s("el-table-column",{attrs:{align:"center",prop:"temp3",label:"积极参与班级组织的活动"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-checkbox",{model:{value:e.row.temp3,callback:function(a){t.$set(e.row,"temp3",a)},expression:"scope.row.temp3"}})]}}])}),s("el-table-column",{attrs:{align:"center",prop:"other",label:"其他表现","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-input",{model:{value:e.row.other,callback:function(a){t.$set(e.row,"other",a)},expression:"scope.row.other"}})]}}])})],1),s("footer",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisibleEva=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitFormEva()}}},[t._v("确 定")])],1)],1)],1)},i=[],r=(a("7f7f"),a("cadf"),a("551c"),a("097d"),{name:"Archives",data:function(){return{dataBtnName:"编辑",dataForm:{teachername:"",wdlx:"",xqah:"",wdtc:""},dataFormDisabled:!0,medalList:"",imgUrl:"/resource/showImg?path=",year:"",dialogVisible:!1,schoolList:[],gradeList:[],ruleForm:{student_id:"",title:"",archive_date:"",dimensionality_school_id:"",grade_id:"",growth:"",description:"",archiveFile:""},archiveFileList:[],fileList:[],rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}]},dialogVisibleEva:!1,dialogName:"",evaluationList:[],weeklyid:"",detailShow:!1,detailList:[],evaluateList:[],classRankList:[],classRankShow:!0,gradeRankList:[],radar:[],max:0}},computed:{user:function(){return this.$store.state.user}},created:function(){var t=this;this.$ajax.post("/api/desktop/getInfo").then(function(e){t.$store.commit("setData",{name:"user",data:e.data.data})}),this.$ajax.post("/api/student/getInfo").then(function(e){t.dataForm=e.data.data}),this.$ajax.post("/api/student/getXn").then(function(e){t.year=e.data.data.xn}),this.getDetailList(),this.$ajax.post("/api/student/getstudentArchivesList").then(function(e){t.radar=e.data.data}).then(function(){t.drawRadar()}),this.$ajax.post("/api/student/getstudentMedal").then(function(e){t.medalList=e.data.data}),this.$ajax.post("/api/student/getEvaluateList").then(function(e){t.evaluateList=e.data.data}),this.$ajax.post("/api/myClass/getBjRank").then(function(e){t.classRankList=e.data.data}),this.$ajax.post("/api/myClass/getNjRank ").then(function(e){t.gradeRankList=e.data.data})},methods:{eva:function(t){this.dialogVisibleEva=!0,this.dialogName="评价",this.weeklyid=t,this.getEvaluationList()},getEvaluationList:function(){var t=this;this.$ajax.post("/api/processEvaluate/getEvaluationList",{weekly:this.weeklyid,roleId:"6"}).then(function(e){t.evaluationList=e.data.data})},submitFormEva:function(){var t=this,e=JSON.stringify(this.evaluationList);this.$ajax.post("/api/processEvaluate/addEvaluation",{evaluation:e,weekly:this.weeklyid,roleId:"6"}).then(function(e){t.dialogVisibleEva=!1,t.$message.success(e.data.errmsg)})},editor:function(){var t=this;"编辑"===this.dataBtnName?(this.dataBtnName="保存",this.dataFormDisabled=!1):"保存"===this.dataBtnName&&this.$ajax.post("/api/student/updateStudent",this.dataForm).then(function(e){t.dataBtnName="编辑",t.dataFormDisabled=!0,t.$message.success(e.data.errmsg)})},drawRadar:function(){var t=this,e=this.$echarts.init(document.getElementById("radar"));this.$ajax.post("/api/student/getGrowthsMax").then(function(e){t.max=e.data.data.max,console.log(t.max)}).then(function(){console.log(t.max),e.setOption({radar:{name:{textStyle:{color:"#333",fontSize:"12px"}},nameGap:2,axisLine:{lineStyle:{color:"rgba(131,141,158,.1)"}},indicator:[{name:t.radar[0].name,max:t.max},{name:t.radar[1].name,max:t.max},{name:t.radar[2].name,max:t.max},{name:t.radar[3].name,max:t.max},{name:t.radar[4].name,max:t.max}],radius:50},series:[{type:"radar",data:[{value:[t.radar[0].growths,t.radar[1].growths,t.radar[2].growths,t.radar[3].growths,t.radar[4].growths],name:"",itemStyle:{normal:{color:"rgba(95,184,120,.3)"}}}]}]})})},getDetailList:function(){var t=this;this.$ajax.post("/api/student/getstudentArchives").then(function(e){t.detailList=e.data.data})},getSchoolList:function(){var t=this;this.$ajax.post("/api/archives/getSchoolDimensionalityList").then(function(e){t.schoolList=e.data.data})},schoolChange:function(){var t=this;this.gradeList=[],this.ruleForm.grade_id="",this.$ajax.post("/api/archives/getGrowth ",{dimensionality_school_id:this.ruleForm.dimensionality_school_id}).then(function(e){t.ruleForm.growth=e.data.data.growth}),this.$ajax.post("/api/archives/getGradeList",{dimensionality_school_id:this.ruleForm.dimensionality_school_id}).then(function(e){t.gradeList=e.data.data})},gradeChange:function(){var t=this;this.$ajax.post("/api/archives/getGrowth ",{grade_id:this.ruleForm.grade_id}).then(function(e){t.ruleForm.growth=e.data.data.growth})},clearForm:function(){this.ruleForm.student_id="",this.ruleForm.title="",this.ruleForm.archive_date="",this.ruleForm.dimensionality_school_id="",this.ruleForm.grade_id="",this.ruleForm.growth="",this.ruleForm.description=""},add:function(){this.clearForm(),this.dialogVisible=!0,this.getSchoolList()},handleRemove:function(t,e){var a=t.url?t.url:t.response.path;this.$ajax.post("/resource/deleteFile",{path:a}).then(function(t){console.log(t.data.errmsg)}),this.fileList=e},handleSuccess:function(t,e,a){console.log(t.errmsg),this.fileList=a},submitForm:function(t){var e=this,a="/api/archives/add";this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;for(var s=0;s<e.fileList.length;s++)e.fileList[s].response?e.archiveFileList.push({url:e.fileList[s].response.path,name:e.fileList[s].name}):e.archiveFileList.push({url:e.fileList[s].url,name:e.fileList[s].name});e.ruleForm.archiveFile=JSON.stringify(e.archiveFileList),e.$ajax.post(a,e.ruleForm).then(function(t){e.getDetailList(),e.dialogVisible=!1,e.$message.success(t.data.errmsg)})})}}}),o=r,l=(a("e2d5"),a("2877")),n=Object(l["a"])(o,s,i,!1,null,null,null);n.options.__file="Archives.vue";e["default"]=n.exports},beda:function(t,e,a){t.exports=a.p+"img/5.9053effa.png"},c947:function(t,e,a){t.exports=a.p+"img/3.ff9b3309.png"},e2d5:function(t,e,a){"use strict";var s=a("0221"),i=a.n(s);i.a},fab8:function(t,e,a){t.exports=a.p+"img/4.1a526fa0.png"}}]);
//# sourceMappingURL=chunk-05061043.ed42c91d.js.map