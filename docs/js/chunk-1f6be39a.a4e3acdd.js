(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f6be39a"],{3990:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-card",{staticClass:"page"},[l("header",{attrs:{slot:"header"},slot:"header"},[e._v("\n        学校维度\n    ")]),l("el-form",{staticClass:"search",attrs:{size:"medium","label-width":"60px",inline:!0}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-input",{attrs:{placeholder:"学校维度名称"},model:{value:e.xxName,callback:function(t){e.xxName=t},expression:"xxName"}})],1),l("el-form-item",{attrs:{label:"类型"}},[l("el-select",{attrs:{placeholder:"国家维度"},model:{value:e.dimensionalityId,callback:function(t){e.dimensionalityId=t},expression:"dimensionalityId"}},[l("el-option",{attrs:{label:"全部",value:""}}),e._l(e.type,function(e){return l("el-option",{attrs:{label:e.name,value:e.id}})})],2)],1),l("el-form-item",[l("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.getTableData}},[e._v("查询")])],1)],1),l("div",{staticClass:"btn"},[l("el-button-group",[l("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v("添加")]),l("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-edit"},on:{click:e.editor}},[e._v("编辑")])],1),l("el-button-group",[l("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-check"},on:{click:function(t){e.startOrClose(1)}}},[e._v("启用")]),l("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-close"},on:{click:function(t){e.startOrClose(2)}}},[e._v("禁用")])],1)],1),l("el-table",{staticClass:"table",attrs:{data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{align:"center",type:"selection",width:"40"}}),l("el-table-column",{attrs:{align:"center",prop:"bh",label:"编号","min-width":"40",sortable:""}}),l("el-table-column",{attrs:{align:"center",prop:"order_on",label:"排序","min-width":"40",sortable:""}}),l("el-table-column",{attrs:{align:"center",prop:"name",label:"学校维度","min-width":"50"}}),l("el-table-column",{attrs:{align:"center",prop:"gjname",label:"国家维度","min-width":"50"}}),l("el-table-column",{attrs:{align:"center",prop:"jlfs",label:"记录方式","min-width":"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("1"===t.row.jlfs?"点选":"录入"))]}}])}),l("el-table-column",{attrs:{align:"center",prop:"is_student_add",label:"是否允许学生添加","min-width":"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("1"===t.row.is_student_add?"是":"否"))]}}])}),l("el-table-column",{attrs:{align:"center",prop:"growth",label:"成长值","min-width":"40",sortable:""}}),l("el-table-column",{attrs:{align:"center",prop:"gradelist",label:"等级","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[l("el-table",{attrs:{data:e.row.gradelist,border:"",size:"mini"}},[l("el-table-column",{attrs:{prop:"name",label:"等级"}}),l("el-table-column",{attrs:{prop:"growth",label:"成长值"}})],1)]}}])}),l("el-table-column",{attrs:{align:"center",prop:"status",label:"状态","min-width":"40",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tag",{attrs:{type:"1"===t.row.status?"success":"info","disable-transitions":""}},[e._v(e._s("1"===t.row.status?"使用":"禁用"))])]}}])}),l("el-table-column",{attrs:{prop:"ms",label:"维度描述"}}),l("el-table-column",{attrs:{prop:"ckbz",label:"参考标准"}})],1),l("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>e.pageSize,expression:"total>pageSize"}],staticClass:"pagination",attrs:{"current-page":e.pageNum,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}),l("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("header",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.dialogName))]),l("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"维度名称",prop:"name"}},[l("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),l("el-form-item",{attrs:{label:"排序",prop:"order_on"}},[l("el-input-number",{attrs:{min:1},model:{value:e.ruleForm.order_on,callback:function(t){e.$set(e.ruleForm,"order_on",t)},expression:"ruleForm.order_on"}})],1),l("el-form-item",{attrs:{label:"允许学生添加"}},[l("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.ruleForm.is_student_add,callback:function(t){e.$set(e.ruleForm,"is_student_add",t)},expression:"ruleForm.is_student_add"}})],1),l("el-form-item",{attrs:{label:"国家维度",prop:"dimensionality_id"}},[l("el-select",{attrs:{placeholder:"请选择国家维度"},model:{value:e.ruleForm.dimensionality_id,callback:function(t){e.$set(e.ruleForm,"dimensionality_id",t)},expression:"ruleForm.dimensionality_id"}},e._l(e.type,function(e){return l("el-option",{attrs:{label:e.name,value:e.id}})}))],1),l("el-form-item",{attrs:{label:"记录方式"}},[l("el-radio-group",{model:{value:e.ruleForm.jlfs,callback:function(t){e.$set(e.ruleForm,"jlfs",t)},expression:"ruleForm.jlfs"}},[l("el-radio",{attrs:{label:"1"}},[e._v("点选")]),l("el-radio",{attrs:{label:"2"}},[e._v("录入")])],1)],1),"2"===e.ruleForm.jlfs?[l("el-form-item",{attrs:{label:"等级设置"}},[l("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus"},on:{click:e.addGrade}},[e._v("新增等级")])],1),e._l(e.ruleForm.gradelist,function(t){return l("el-form-item",{staticClass:"grade"},[l("el-input",{staticClass:"name",attrs:{placeholder:"请输入等级名称"},model:{value:t.name,callback:function(l){e.$set(t,"name",l)},expression:"i.name"}}),l("el-input-number",{staticClass:"growth",model:{value:t.growth,callback:function(l){e.$set(t,"growth",l)},expression:"i.growth"}}),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(l){l.preventDefault(),e.removeGrade(t)}}})],1)})]:e._e(),l("el-form-item",{attrs:{label:"默认成长分"}},[l("el-input-number",{model:{value:e.ruleForm.growth,callback:function(t){e.$set(e.ruleForm,"growth",t)},expression:"ruleForm.growth"}})],1),l("el-form-item",{attrs:{label:"维度描述",prop:"ms"}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:e.ruleForm.ms,callback:function(t){e.$set(e.ruleForm,"ms",t)},expression:"ruleForm.ms"}})],1),l("el-form-item",{attrs:{label:"参考标准"}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:e.ruleForm.ckbz,callback:function(t){e.$set(e.ruleForm,"ckbz",t)},expression:"ruleForm.ckbz"}})],1)],2),l("footer",{attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},i=[],r=l("c93e"),o={data:function(){return{dimensionalityId:"",xxName:"",type:[],tableData:[],multipleSelection:[],pageSize:10,pageNum:1,total:1,dialogVisible:!1,dialogName:"",ruleForm:{name:"",dimensionality_id:"",order_on:1,growth:0,grade:"",gradelist:[],isStudentAdd:"1",jlfs:"1",ms:"",ckbz:""},rules:{name:[{required:!0,message:"维度名称不能为空",trigger:"blur"}],order_on:[{required:!0,message:"排序不能为空",trigger:"blur"}],dimensionality_id:[{required:!0,message:"请选择国家维度",trigger:"change"}],growth:[{required:!0,message:"请输入成长分值",trigger:"blur"}],ms:[{required:!0,message:"请填写维度描述",trigger:"blur"}]}}},created:function(){var e=this;this.$ajax.post("/api/dimensionality/main").then(function(t){e.type=t.data.data}),this.getTableData()},methods:{getTableData:function(){var e=this;this.$ajax.post("/api/dimensionalitySchool/main",{pageSize:this.pageSize,pageNum:this.pageNum,dimensionalityId:this.dimensionalityId,xxName:this.xxName}).then(function(t){e.total=t.data.data.records,e.tableData=t.data.data.rows})},clearForm:function(){this.ruleForm.name="",this.ruleForm.dimensionality_id="",this.ruleForm.ms="",this.ruleForm.ckbz="",this.ruleForm.gradelist=[]},add:function(){this.clearForm(),this.dialogVisible=!0,this.dialogName="添加"},editor:function(){0===this.multipleSelection.length?this.$message.warning("请选择数据"):this.multipleSelection.length>1?this.$message.warning("只能选择一项编辑"):(this.dialogVisible=!0,this.dialogName="编辑",this.ruleForm=Object(r["a"])({},this.multipleSelection[0]))},addGrade:function(){this.ruleForm.gradelist.push({name:"",growth:""})},removeGrade:function(e){var t=this.ruleForm.gradelist.indexOf(e);-1!==t&&this.ruleForm.gradelist.splice(t,1)},submitForm:function(e){var t=this,l="添加"===this.dialogName?"/api/dimensionalitySchool/add":"/api/dimensionalitySchool/update";this.$refs[e].validate(function(e){if(!e)return!1;"1"===t.ruleForm.jlfs?t.ruleForm.grade="":t.ruleForm.grade=JSON.stringify(t.ruleForm.gradelist),t.$ajax.post(l,t.ruleForm).then(function(e){t.handleCurrentChange(1),t.dialogVisible=!1,t.$message.success(e.data.errmsg)})})},startOrClose:function(e){var t=this;if(0===this.multipleSelection.length)this.$message.warning("请选择数据");else{for(var l=[],a=0;a<this.multipleSelection.length;a++)l.push(this.multipleSelection[a].id);this.$ajax.post("/api/dimensionalitySchool/toUpdateStatus",{dimensionalitySchoolIds:l,status:e}).then(function(e){t.handleCurrentChange(1),t.$message.success(e.data.errmsg)})}},handleSelectionChange:function(e){this.multipleSelection=e},handleCurrentChange:function(e){this.pageNum=e,this.getTableData()}}},n=o,s=(l("9eae"),l("2877")),u=Object(s["a"])(n,a,i,!1,null,null,null);u.options.__file="table.vue";t["default"]=u.exports},"7d3d":function(e,t,l){},"9eae":function(e,t,l){"use strict";var a=l("7d3d"),i=l.n(a);i.a}}]);
//# sourceMappingURL=chunk-1f6be39a.a4e3acdd.js.map